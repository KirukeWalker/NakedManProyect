<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_boss3_head</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_hazard</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Variables
global.vidaboss = 20;
status = 0;
rotation_speed = 4;
speed = 0;
x_pos = x;
y_pos = y;
body_segments = 10;
player_direction = 0;

/*Turning_direction
    -1  -    Left
    0   -   No turning
    1   -   -Right
*/
turning_direction = 0;
//Create body and tail
for(i = 0; i &lt; body_segments; i++)
{
    body[i] = instance_create(x-32*(i+1), y, FinalBoss3_Body_Test);
    if (i &gt; 0) body[i].object_to_follow = body[i-1];
}

//Get the player
player = instance_find(object5, 0);
//Get the camera
camera = instance_find(obj_camera2, 0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//
left_branch_length = (irandom_range(2, 8));
rigth_branch_length = (irandom_range(2, 8));
//Parte de la iaquierda
for(i = 0; i &lt; left_branch_length; i++){
    branch = instance_create(672 - (i*32), 32, obj_falling_branch);
}
//Parte central
branch = instance_create(704, 32, obj_falling_branch);
//Parte derecha
for(i = 0; i &lt; rigth_branch_length; i++){
    branch = instance_create(736 + (i*32), 32, obj_falling_branch);
}
//Reseta cuenta
alarm_set(1, 128);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//
tronco = instance_create(704, 32, obj_falling_tree);
alarm_set(0, 32);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//
switch(status){
    //Espera a que le player llegue a la posicion
    case 0:
        if(player.y &lt; 500 &amp;&amp; player.vsp == 0){
            //Cuadra la camara
            camera = instance_find(obj_camera2, 0);
            camera.status = 2;
            camera.movement_speed = 5;
            camera.objectiveX = 720;
            camera.objectiveY = 320;
            //
            player.status_locked = true;
            //Paramos el muro
            //with(obj_fire_wall) instance_destroy();
            obj_fire_wall.hspeed = 0;
            //
            for(i = 416; i &lt; 1024; i+= 32){
                ascending_fire = instance_create(i, 672, obj_ascending_fire);
            }
            status = 1;
        }
    break;
    //Wait for the fire to ascend
    case 1:
        obj_ascending_fire.y -= 2;
        if(obj_ascending_fire.y &lt; 544){
            speed = 10;
            player.status_locked = false;
            status = 2;
            //Alarma para hacer más tronco
            alarm_set(0, 1);
            //Alarma para sacar ramas
            alarm_set(1, 65);
            //
            background_vspeed = 1;
            //Instance the lifebar
            //health_bar_frame = instance_create(480, 100, obj_healthbar_frame);
            lifeBar = instance_create(480, 100, obj_healthbar_anal);
        }
    break;
    //Start to chase the player
    case 2:
        //
        if(global.vidaboss &lt;= 10){
            speed *= 2;
            rotation_speed = 35;
            status = 3;
        }
    break;
    //Super speed
    case 3:
        
        //Tiramos el arbol cuando muera
        if(global.vidaboss &lt;= 0){
            player.status_locked = true;
            //Stop spamming them
            alarm_set(0, -1);
            alarm_set(1, -1);
            //Make them disomount
            obj_falling_tree.alarm[0] = 1;
            obj_falling_branch.alarm[0] = 1;
            //
            obj_fade.fadeIn = false;
            obj_fade.fading_speed = 0.01;
            status = 4;
        }
    break;
    //Die
    case 4:
        obj_ascending_fire.y += 1;
    break;
}
//Way to chase the player
if(status == 2 || distance_to_point(720, 320) &gt;= 400){
    //Rotate towards the player
        //Ge the player´s position
        player_direction = point_direction(x,y, player.x, player.y);
        if(player_direction &gt; direction) 
            turning_direction = 1;
        else if(player_direction &lt; direction)
            turning_direction = -1;
        else
            turning_direction = 0;
        //Here we control the jump between 0 and 360
        if(abs(player_direction - direction) &gt; 180)
            turning_direction *= -1;
        //And rotate towards the player
        direction += turning_direction * rotation_speed;
        //Ajustar el sprite del bicho con su cuerpo
        image_angle = direction - 45;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_cacota">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//
global.vidaboss --;
with(other) instance_destroy();
instance_create(x, y, obj_cacota_sound);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Control stuff
//draw_set_color(c_white);
//draw_text(30, 30, direction);
//draw_text(30, 50, player_direction);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
